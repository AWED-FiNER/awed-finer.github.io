<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWED-FiNER | Fine-grained NER across 36 Languages</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@gradio/client@1.3.0/dist/index.min.js"></script>
    <style>
        :root { --primary: #00568b; --bg: #f4f7f9; --text: #333; }
        body { font-family: -apple-system, sans-serif; line-height: 1.6; background: var(--bg); color: var(--text); margin: 0; padding: 0; }
        .header { background: var(--primary); color: white; padding: 2.5rem 1rem; text-align: center; }
        .container { max-width: 1000px; margin: -2rem auto 2rem; padding: 0 1rem; }
        .card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 2rem; }
        label { display: block; font-weight: bold; margin-bottom: 0.5rem; color: var(--primary); }
        select, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; box-sizing: border-box; margin-bottom: 1.5rem; }
        button { background: var(--primary); color: white; border: none; padding: 1rem; font-size: 1.1rem; border-radius: 6px; cursor: pointer; width: 100%; font-weight: bold; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .output-box { margin-top: 1rem; padding: 1rem; background: #1e1e1e; color: #d4d4d4; border-radius: 6px; min-height: 100px; font-family: 'Courier New', monospace; white-space: pre-wrap; font-size: 0.9rem; border: 1px solid #333; }
        pre { background: #f1f1f1; padding: 1rem; border-radius: 6px; overflow-x: auto; font-size: 0.85rem; border: 1px solid #ddd; }
        .links-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 10px; margin-top: 15px; }
        .btn-outline { text-align: center; padding: 8px; border: 1px solid var(--primary); color: var(--primary); text-decoration: none; border-radius: 4px; font-weight: 500; font-size: 0.9rem; }
        .btn-outline:hover { background: var(--primary); color: white; }
    </style>
</head>
<body>

<div class="header">
    <h1>üåç AWED-FiNER</h1>
    <p>Fine-grained NER across 36 languages for 6.6 billion speakers</p>
</div>

<div class="container">
    <div class="card">
        <label for="lang-select">1. Select Language</label>
        <select id="lang-select"></select>

        <label for="text-input">2. Input Text</label>
        <textarea id="text-input" rows="3"></textarea>

        <button id="analyze-btn">Analyze Text</button>

        <label style="margin-top: 1.5rem;">3. NER Results (JSON Output)</label>
        <div id="output-display" class="output-box">Results will appear here...</div>
    </div>

    <div class="card">
        <h2>About the Project</h2>
        <p>AWED-FiNER is a unified <strong>Agentic AI Tool</strong> for Fine-grained Named Entity Recognition. It routes queries to specialized expert models optimized for 36 languages.</p>
        
        <h3>Resources & Profiles</h3>
        <div class="links-grid">
            <a href="https://huggingface.co/spaces/prachuryyaIITG/AWED-FiNER" class="btn-outline">HuggingFace Space</a>
            <a href="https://github.com/PrachuryyaKaushik/AWED-FiNER" class="btn-outline">Agentic Tool Repo</a>
            <a href="https://www.linkedin.com/in/pkabundant/" class="btn-outline">Prachuryya (LinkedIn)</a>
            <a href="https://huggingface.co/prachuryyaIITG" class="btn-outline">HF Profile</a>
        </div>

        <h3 style="margin-top:20px;">Citations</h3>
        <pre><code>@misc{kaushik2026awedfiner,
  title = {AWED-FiNER: Agents, Web Applications, and Expert Detectors...},
  author = {Kaushik, Prachuryya and Anand, Ashish},
  year = {2026}
}</code></pre>
    </div>
</div>

<script type="module">
    import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client@1.3.0/dist/index.min.js";

    // ... (Keep the MODELS object exactly as it is in your current file) ...

    const langSelect = document.getElementById('lang-select');
    const textInput = document.getElementById('text-input');
    const analyzeBtn = document.getElementById('analyze-btn');
    const outputDisplay = document.getElementById('output-display');

    async function runInference() {
        const text = textInput.value;
        const lang = langSelect.value;
        
        if(!text) return alert("Please enter text");

        analyzeBtn.disabled = true;
        analyzeBtn.innerText = "‚åõ Initializing...";
        outputDisplay.innerText = "Waking up the Expert Models...";

        try {
            // 1. Connect to the space
            const client = await Client.connect("prachuryyaIITG/AWED-FiNER");
            
            // 2. Use a more robust prediction call with status tracking
            const prediction = client.predict("/predict", {
                text: text,
                language: lang,
            });

            // This listener helps if the ZeroGPU is in a queue
            for await (const message of prediction) {
                if (message.type === "status") {
                    outputDisplay.innerText = `Status: ${message.stage.toUpperCase()}... \nQueue Position: ${message.position || 'Processing'}`;
                }
                if (message.type === "data") {
                    outputDisplay.innerText = JSON.stringify(message.data[0], null, 2);
                }
            }

        } catch (error) {
            outputDisplay.innerText = "Connection Error: " + error.message + 
            "\n\nMay need restarting.";
            console.error(error);
        } finally {
            analyzeBtn.disabled = false;
            analyzeBtn.innerText = "Analyze Text";
        }
    }

    analyzeBtn.addEventListener('click', runInference);
</script>

</body>
</html>
